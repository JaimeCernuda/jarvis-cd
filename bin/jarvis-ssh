#!/usr/bin/env python3

#USAGE jarvis-ssh [host-id]

from jarvis_cd.comm.ssh_config import SSHConfigMixin
from jarvis_cd.comm.issh_node import InteractiveSSHNode
import sys

if __name__ == '__main__':
    conf = SSHConfigMixin().LoadConfig()
    host_id = 0
    if len(sys.argv) == 2:
        host_id = int(sys.argv[1])
    if len(sys.argv) > 2:
        print("USAGE: jarvis-ssh [host-id]")
        exit(1)
    if conf.all_hosts is None:
        print("Hostfile undefined in jarvis_conf.yaml")
        exit(1)
    InteractiveSSHNode(conf.all_hosts[host_id], conf.ssh_info).Run()