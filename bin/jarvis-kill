#!/usr/bin/env python3

import sys
from jarvis_cd.shell.kill_node import KillNode
from jarvis_cd.comm.ssh_config import SSHConfigMixin
from jarvis_cd.basic.echo_node import EchoNode, ErrorNode
from jarvis_cd.enumerations import Color

if __name__ == '__main__':
    if len(sys.argv) < 2:
        ErrorNode("USAGE: jarvis-kill [regex_a] [regex_b] ...").Run()
        exit(1)
    EchoNode(f"Calling kill {sys.argv[1:]}", color=Color.CYAN).Run()
    conf = SSHConfigMixin().LoadConfig()
    KillNode(sys.argv[1:], hosts=conf.all_hosts, ssh_info=conf.ssh_info).Run()